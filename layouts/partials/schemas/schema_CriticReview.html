{{- /*
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  SEMANTIC WEB
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

  ****************************
  ** Syntax: JSON-LD        **
  ** Vocab: schema.org      **
  **                        **
  ** Schema: CriticReview   **
  ****************************

  Links:
    - https://www.w3.org/standards/semanticweb/
    - https://schema.org/CriticReview
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  SEMANTIC WEB
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
*/ -}}

{{- /*
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  HOW TO USE
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

  1. Copy below into your /content/ frontmatter
     - place it before the TOML ("+++") / YAML ("---") / JSON ("}")closing tag
     - convert to YAML or JSON if needed

  +++
  # Author and Images are common HUGO defaults. Included here in case you are not using it in your theme.
  contenttypes = ["CriticReview"]
  #author = "custom author"
  #images = [""]
  #license = "link to custom license if different"

  [semweb]
  type = "Book, Movie, or TVSeries"

  [semweb.review]
  snippet = "*******MAX 200 CHARACTERS*******"
  rating = "1.00-10.00"

  # If different from our website
  #[semweb.publisher]
  #name = "publisher"
  #sameas = ["Wikipedia", "Goodreads", "IMDB", "official website"]

  # If different from default author
  #[semweb.author]
  #sameas = ["Wikipedia", "Goodreads", "IMDB", "official website"]

  [semweb.product]
  name = "Product Title"
  #alternatenames = [""]
  sameas = ["Wikipedia", "Goodreads", "IMDB", "official website"]
  countryoforigin = ""
  description = "synopsis"
  datepublished = "YYYY-MM-DD"
  categories = ["genre1"]

  # For TVSeries
  #[semweb.product.season]
  #name = "Season Title or Generic"
  #totalepisodes = "20"
  #start = "YYYY-MM-DD"
  #end = "YYYY-MM-DD"

  # For TVSeries and if reviewing an episode
  #[semweb.product.season.episode]
  #epnumber = "1"
  #name = "Episode Title or Generic"
  #datepublished = "YYYY-MM-DD"

  # For adaptations
  #[semweb.product.isbasedon]
  #name = "Title of Original Work"
  #alternatenames = [""]
  #sameas = ["Wikipedia", "Goodreads", "IMDB", "official website"]

  #[semweb.product.isbasedon.author]
  #name = "Author of Original Work"
  #alternatenames = [""]
  #sameas = ["Wikipedia", "Goodreads", "IMDB", "official website"]

  # Duplicate for more Actor entries
  [[semweb.actor]]
  name = "Actor"
  #alternatenames = [""]
  sameas = ["Wikipedia", "Goodreads", "IMDB", "official website"]

  # Duplicate for more Character entries
  [[semweb.character]]
  name = "Character"
  #alternatenames = [""]
  #sameas = ["Wikipedia", "Goodreads", "IMDB", "official website"]

  # Duplicate for more Director entries
  [[semweb.director]]
  name = "Director"
  #alternatenames = [""]
  sameas = ["Wikipedia", "Goodreads", "IMDB", "official website"]

  # Video URLs can be any, YouTube provided as a guide only
  [semweb.video]
  name = "Trailer Title"
  description = "Official trailer"
  uploaddate = "YYYY-MM-DD"
  thumbnailurl = "https://img.youtube.com/vi/CHANGE_THIS/hqdefault.jpg"
  contenturl = "https://www.youtube.com/watch?v=CHANGE_THIS"
  embedurl = "https://www.youtube-nocookie.com/embed/CHANGE_THIS"

  +++
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  HOW TO USE
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
*/ -}}

{{- /*
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  HUGO Params used
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

    Review itself
      .Params.keywords
      .Params.semweb.review.snippet
      .Params.semweb.review.rating

    Review Publisher
      .Params.semweb.publisher.name
      .Params.semweb.publisher.sameas

    Review Author
      $.Param "author.name"
      .Params.semweb.author.sameas OR .Site.Params.ownerhomepage

    Review Language and Translations
      .Language.Params.languagecodehtml
      .AllTranslations

    Review License
      .Param "license"

    Product
      $.Params.images
      .Params.semweb.type
      .Params.semweb.product.name
      .Params.semweb.product.alternatenames
      .Params.semweb.product.sameas
      .Params.semweb.product.countryoforigin
      .Params.semweb.product.description
      .Params.semweb.actor
      .Params.semweb.actor.name
      .Params.semweb.actor.alternatenames
      .Params.semweb.actor.sameas
      .Params.semweb.character
      .Params.semweb.character.name
      .Params.semweb.character.alternatenames
      .Params.semweb.director
      .Params.semweb.director.name
      .Params.semweb.director.alternatenames
      .Params.semweb.director.sameas
      .Params.semweb.product.isbasedon
      .Params.semweb.product.isbasedon.name
      .Params.semweb.product.isbasedon.alternatenames
      .Params.semweb.product.isbasedon.sameas
      .Params.semweb.product.isbasedon.author
      .Params.semweb.product.isbasedon.author.name
      .Params.semweb.product.isbasedon.author.alternatenames
      .Params.semweb.product.isbasedon.author.sameas
      .Params.semweb.product.datepublished
      .Params.semweb.product.categories

    Product Season
      .Params.semweb.product.season
      .Params.semweb.product.season.name
      .Params.semweb.product.season.totalepisodes
      .Params.semweb.product.season.start
      .Params.semweb.product.season.end

    Product Episode
      .Params.semweb.product.season.episode
      .Params.semweb.product.season.episode.epnumber
      .Params.semweb.product.season.episode.name
      .Params.semweb.product.season.episode.datepublished

    Video
      .Params.semweb.video
      .Params.semweb.video.name
      .Params.semweb.video.description
      .Params.semweb.video.uploaddate
      .Params.semweb.video.thumbnailurl
      .Params.semweb.video.contenturl
      .Params.semweb.video.embedurl

  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  HUGO Params used
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
*/ -}}

{{- /*
  * snippet can't exceed 200 characters
  * snippet must clearly indicate an opinion about the review subject
  * Use non-smart double quotation marks (") to denote titles
  * The snippet must make sense on its own and should not be confusing to someone who isn't reading the whole article.
  * The snippet must be an exact excerpt from the long-form body of the review. It should not be the review headline, a question or a teaser.
  * The snippet must be complete (not cut off, truncated, or ending in ellipses) and well-formed (having correct punctuation and grammar) thought.

  * See: https://developers.google.com/search/docs/data-types/critic-review
    * For more info about Book reviews
        - itemReviewed -> author -> name
        - itemReviewed -> isbn

  * Also see:
    * https://schema.org/Movie
    * https://schema.org/TVSeries
    * https://schema.org/Book
*/ -}}

{{- /*
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
  THEME VARIATIONS
  ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

  Generic:
    - "image": [ {{ range $n, $v := $.Params.images }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],
  Future Imperfect Slim:
    - "image": [ {{ range $n, $v := $.Params.images }}{{ if $n }}, {{ end }}"{{ .src }}"{{ end }} ],
*/ -}}
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CriticReview",
    "datePublished": "{{ dateFormat "2006-01-02T15:04:05Z" .Date.UTC }}",
    "description": "{{ .Params.semweb.review.snippet }}",
    "itemReviewed": {
      "@type": "{{ .Params.semweb.type }}",
      "name": "{{ .Params.semweb.product.name }}",
      {{ with .Params.semweb.product.alternatenames }}"alternateName": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
      "sameAs": [ {{ range $n, $v := .Params.semweb.product.sameas }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],
      "image": [ {{ range $n, $v := $.Params.images }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],
      "countryOfOrigin": "{{ .Params.semweb.product.countryoforigin }}",
      "description": "{{ .Params.semweb.product.description }}",
      {{- if .Params.semweb.actor }}
      "actor": [
      {{- range $n, $v := $.Params.semweb.actor }}{{ if $n -}},{{- end }}
        {
          "name": "{{ .name }}",
          {{ with .alternatenames }}"alternateName": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
          {{ with .sameas }}"sameAs": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
          "@type": "Person"
        }
      {{- end }}
      ],
      {{- end }}
      {{- if .Params.semweb.character }}
      "character": [
      {{- range $n, $v := $.Params.semweb.character }}{{ if $n -}},{{- end }}
        {
          "name": "{{ .name }}",
          {{ with .alternatenames }}"alternateName": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
          {{ with .sameas }}"sameAs": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
          "@type": "Person"
        }
      {{- end }}
      ],
      {{- end }}

      {{- if .Params.semweb.director }}
      "director": [
      {{- range $n, $v := $.Params.semweb.director }}{{ if $n -}},{{- end }}
        {
          "name": "{{ .name }}",
          {{ with .alternatenames }}"alternateName": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
          {{ with .sameas }}"sameAs": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
          "@type": "Person"
        }
      {{- end }}
      ],
      {{- end }}
      {{ if and (eq .Params.semweb.type "TVSeries") .Params.semweb.product.season -}}
      "containsSeason": [
        {
          "name": "{{ .Params.semweb.product.season.name }}",
          "numberOfEpisodes": "{{ .Params.semweb.product.season.totalepisodes }}",
          "startDate": "{{ .Params.semweb.product.season.start }}",
          "endDate": "{{ .Params.semweb.product.season.end }}",
          {{ if .Params.semweb.product.season.episode -}}
          "episode": {
            "episodeNumber": "{{ .Params.semweb.product.season.episode.epnumber }}",
            "name": "{{ .Params.semweb.product.season.episode.name }}",
            "datePublished": "{{ .Params.semweb.product.season.episode.datepublished }}",
            "@type": "TVEpisode"
          },
          {{- end }}
          "@type": "TVSeason"
        }
      ],
      {{- end }}
      {{ if .Params.semweb.product.isbasedon -}}
      "isBasedOn": {
        "name": "{{ .Params.semweb.product.isbasedon.name }}",
        {{ with .Params.semweb.product.isbasedon.alternatenames }}"alternateName": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
        {{ with .Params.semweb.product.isbasedon.sameas }}"sameAs": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
        "author": {
          "name": "{{ .Params.semweb.product.isbasedon.author.name }}",
          {{ with .Params.semweb.product.isbasedon.author.alternatenames }}"alternateName": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
          {{ with .Params.semweb.product.isbasedon.author.sameas }}"sameAs": [ {{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],{{ end }}
          "@type": "Person"
        },
        "@type": "CreativeWork"
      },
      {{- end }}
      {{ if .Params.semweb.video -}}
      "trailer": {
        "name": "{{ .Params.semweb.video.name }}",
        "description": "{{ .Params.semweb.video.description }}",
        "uploadDate": "{{ .Params.semweb.video.uploaddate }}",
        "thumbnailUrl": "{{ .Params.semweb.video.thumbnailurl }}",
        "contentUrl": "{{ .Params.semweb.video.contenturl }}",
        "embedUrl": "{{ .Params.semweb.video.embedurl }}",
        "@type": "VideoObject"
      },
      {{- end }}
      "datePublished": "{{ .Params.semweb.product.datepublished }}",
      "genre": [ {{ range $n, $v := .Params.semweb.product.categories }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ]
    },
    "author": {
      "name": "{{ $.Param "author.name" }}",
      "sameAs": [ {{ with .Params.semweb.author.sameas }}{{ range $n, $v := . }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }}{{ else }}{{ .Site.Params.ownerhomepage }}{{ end }} ],
      "@type": "Person"
    },
    "inLanguage": "{{ .Language.Params.languagecodehtml }}",
    "reviewRating": {
      "bestRating": "10",
      "worstRating": "1",
      "ratingValue": "{{ .Params.semweb.review.rating }}",
      "@type": "Rating"
    },
    "url": [ {{ range $n, $v := .AllTranslations }}{{ if $n }}, {{ end }}"{{ .Permalink }}"{{ end }} ],
    "keywords": [ {{ range $n, $v := .Params.keywords }}{{ if $n }}, {{ end }}"{{ $v }}"{{ end }} ],
    "acquireLicensePage": "{{ .Param "license" }}",
    "license": "{{ .Param "license" }}",
    "usageInfo": "{{ .Param "license" }}"
  }
</script>
